<div class="container h-100">
  <div class="row h-100 justify-content-center align-items-center">
    <div class="col-lg-10 text-center">



      <mat-form-field style="width: 250px" appearance="fill">
        <mat-label>Choose an Algorithm</mat-label>
        <mat-select id="algorithmDropdown" [formControl]="algorithm" (selectionChange)="changeAlgorithm()">
          <mat-option value="simple">Simple</mat-option>
          <mat-option value="hungarian">Hungarian algorithm</mat-option>
        </mat-select>
      </mat-form-field>

      <!-- PLAYBACK CONTROLS -->
      <div *ngIf="!(this.algorithm.value == '')">
        <!-- SPEED CONTROL SLIDER -->
        <div>
          <div class="row justify-content-center">
            <span style="padding-top: 4px" class="mt-2 mr-2">Slow</span>
              <mat-slider
              #timeSlider
              thumbLabel
              [displayWith]="formatLabel"
              tickInterval="1000"
              min="50"
              max="3000"
              value="2500"
              (input)="this.updateSpeed(timeSlider.value)"></mat-slider>
              <span style="padding-top: 4px" class="mt-2 ml-2">Fast</span>
          </div>
        </div>

        <!-- PLAYBACK ICONS -->
        <div>
          <div class="row justify-content-center">
            <!-- GO TO START -->
            <mat-icon style="cursor: pointer;" class="playbackButton  disabled mr-2" aria-hidden="false" aria-label="Example home icon" (click)="this.playback.restart()" [ngClass]="{'disabled': this.playback.firstRun}">skip_previous</mat-icon>

            <!-- BACK ONE STEP -->
            <mat-icon style="cursor: pointer;" class="playbackButton unselectable mr-2" aria-hidden="false" aria-label="Example home icon" (click)="this.playback.backStep()" [ngClass]="{'disabled': this.playback.firstRun || !this.playback.pause}">fast_rewind</mat-icon>

            <!-- PLAY -->
            <mat-animated-icon class="playbackButton unselectable" start="play_arrow" end="pause" colorStart="none" colorEnd="none" [animate]="!this.playback.pause" (click)="this.toggle()" [ngClass]="{'disabled': this.playback.stepCounter >= this.playback.numCommands}"></mat-animated-icon>

            <!-- FORWARD ONE STEP -->
            <mat-icon style="cursor: pointer;" class="playbackButton unselectable ml-2" aria-hidden="false" aria-label="Example home icon" (click)="this.playback.forwardStep()" [ngClass]="{'disabled': this.playback.firstRun || !this.playback.pause}">fast_forward</mat-icon>

            <!-- GO TO END -->
            <mat-icon style="cursor: pointer;" class="playbackButton unselectable ml-2" aria-hidden="false" aria-label="Example home icon" (click)="this.playback.goToEnd()" [ngClass]="{'disabled': this.playback.firstRun}">skip_next</mat-icon>
          </div>
        </div>

        <!-- STEP SLIDER -->
        <div>
          <span style="padding-top: 4px" class="mt-2 mr-2">{{ this.playback.stepCounter }}</span>
          <mat-slider style="width:80%; max-width: 600px;"
          #slider
          thumbLabel
          [(ngModel)]="this.playback.stepCounter"
          (input)="this.formatSteps(slider.value)"
          tickInterval="1"
          min="0"
          max={{this.playback.numCommands}}
          disabled="{{this.playback.firstRun}}"></mat-slider>
          <span style="padding-top: 4px" class="mt-2 ml-2">{{ this.playback.numCommands }}</span>
        </div>
      </div>

      <!-- DESCRIPTION TEXT -->
      <p style="height:50px" class="mt-2" *ngIf="!(this.algorithm.value == '')">{{ this.playback.description }}</p>

      <!-- MATRIX TABLE -->
      <div class="container" *ngIf="(this.algorithm.value == 'hungarian') && (this.playback.matrix.length != 0)">
        <div class="row justify-content-around">
          <div class="col-0">
            <p>Monitor matrix</p>
            <div class="divTable">
              <div class = "m0 row r{{i}}" *ngFor="let row of this.playback.matrix[this.playback.stepCounter]; let i = index">
                <div class = "m1 col c{{j}}" *ngFor="let col of row; let j = index">
                  <div class = "number{{i}}{{j}}"> {{ col }} </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-0">
            <p>Target matrix</p>
            <div class="divTable">
              <div class = "m0 row r{{i}}" *ngFor="let row of this.playback.originalMatrix; let i = index">
                <div class = "m1 col c{{j}}" *ngFor="let col of row; let j = index">
                  <div class = "number{{i}}{{j}}"> {{ col }} </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- CODE TERMINAL -->
      <div class="terminal">
        <simple-code *ngIf="this.algorithm.value == 'simple'"></simple-code>
        <hungarian-code *ngIf="this.algorithm.value == 'hungarian'"></hungarian-code>
      </div>
      
    </div>
  </div>
</div>
